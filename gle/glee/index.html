<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AIPod 博客</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app">
      <main class="main">
        <section id="view-home" class="view view-active">
          <!-- Home Header -->
          <header class="home-header">
            <div class="header-left">
              <img src="public/logo.png" alt="AIPod Logo" class="home-logo" />
              <span class="brand-name">AIPod</span>
            </div>
            <button class="header-right" data-view="profile" type="button">
              <img src="public/user.png" alt="用户" class="user-icon" />
              <span class="header-right-label">个人中心</span>
            </button>
          </header>

          <section class="section section-library">
            <div class="section-header">
              <h2 class="section-title">博客素材库</h2>
            </div>
            <div class="card-grid">
              <article class="media-card" data-topic="ielts">
                <div class="media-thumb-wrapper">
                  <img
                    src="public/ieltscover.png"
                    alt="IELTS 素材封面"
                    class="media-thumb"
                  />
                  <button
                    class="play-button"
                    type="button"
                    aria-label="播放 IELTS 素材"
                    data-topic="ielts"
                  >
                    ▶
                  </button>
                </div>
                <div class="media-meta">
                  <h3 class="media-title">IELTS</h3>
                </div>
              </article>

              <article class="media-card" data-topic="christmas">
                <div class="media-thumb-wrapper">
                  <img
                    src="public/christmascover.png"
                    alt="Christmas 素材封面"
                    class="media-thumb"
                  />
                  <button
                    class="play-button"
                    type="button"
                    aria-label="播放 Christmas 素材"
                    data-topic="christmas"
                  >
                    ▶
                  </button>
                </div>
                <div class="media-meta">
                  <h3 class="media-title">Christmas</h3>
                </div>
              </article>

              <article class="media-card" data-topic="halloween">
                <div class="media-thumb-wrapper">
                  <img
                    src="public/halloweencover.png"
                    alt="Halloween 素材封面"
                    class="media-thumb"
                  />
                  <button
                    class="play-button"
                    type="button"
                    aria-label="播放 Halloween 素材"
                    data-topic="halloween"
                  >
                    ▶
                  </button>
                </div>
                <div class="media-meta">
                  <h3 class="media-title">Halloween</h3>
                </div>
              </article>
            </div>
          </section>

          <section class="section section-community">
            <h2 class="section-title">精选社区</h2>
            <div class="community-card">
              <img
                src="public/community1.png"
                alt="社区精选练习纸示例"
                class="community-image"
              />
              <div class="community-footer">
                <div class="community-user">@一只学习的猫</div>
                <div class="community-actions">
                  <button class="icon-button" type="button" data-action="favorite">
                    收藏
                  </button>
                  <button class="icon-button" type="button" data-action="comment">
                    评论
                  </button>
                </div>
              </div>
            </div>
          </section>
        </section>

        <section id="view-profile" class="view">
          <!-- Profile Header with Back Button -->
          <div class="profile-header">
            <button class="back-to-home-btn" data-view="home" type="button">
              <img src="public/home.png" alt="返回主页" class="nav-icon" />
              <span class="nav-label">返回主页</span>
            </button>
            <h2 class="section-title">个人中心</h2>
          </div>
          <div class="panel profile-panel">
            <div class="profile-section">
              <h3 class="profile-subtitle">用户信息</h3>
              <div class="profile-info">
                <div class="profile-avatar">
                  <img src="public/user.png" alt="用户头像" class="avatar-img" />
                </div>
                <div class="profile-details">
                  <div class="profile-name-container">
                    <div class="profile-name" id="profile-name-display">学习者</div>
                    <button class="edit-btn" id="edit-nickname-btn" type="button">✏️</button>
                  </div>
                  <input type="text" class="nickname-input" id="nickname-input" style="display: none;" />
                  <div class="profile-email">learner@example.com</div>
                  <div class="profile-joined">加入时间: 2024-12</div>
                </div>
              </div>
            </div>
            
            <!-- Podcast Radar Chart Section -->
            <div class="profile-section">
              <h3 class="profile-subtitle">听播客类型分析</h3>
              <div class="radar-chart-container">
                <canvas id="podcast-radar-chart" width="400" height="300"></canvas>
              </div>
            </div>

            <div class="profile-section">
              <h3 class="profile-subtitle">学习统计</h3>
              <div class="stats-grid">
                <div class="stat-item">
                  <div class="stat-value">12</div>
                  <div class="stat-label">完成练习</div>
                </div>
                <div class="stat-item">
                  <div class="stat-value" id="favorites-count">0</div>
                  <div class="stat-label">收藏内容</div>
                </div>
                <div class="stat-item">
                  <div class="stat-value">45</div>
                  <div class="stat-label">学习时长(分钟)</div>
                </div>
              </div>
            </div>
            <div class="profile-section">
              <h3 class="profile-subtitle">最近练习</h3>
              <div class="recent-list">
                <div class="recent-item">
                  <span class="recent-topic">IELTS</span>
                  <span class="recent-date">2天前</span>
                </div>
                <div class="recent-item">
                  <span class="recent-topic">Christmas</span>
                  <span class="recent-date">5天前</span>
                </div>
                <div class="recent-item">
                  <span class="recent-topic">Halloween</span>
                  <span class="recent-date">1周前</span>
                </div>
              </div>
            </div>
            <div class="profile-section">
              <div class="favorites-header">
                <h3 class="profile-subtitle">我的收藏</h3>
                <div class="favorites-actions">
                  <button class="select-all-btn" id="select-all-btn" type="button" style="display: none;">全选</button>
                  <button class="batch-download-btn" id="batch-download-btn" type="button" style="display: none;">批量下载</button>
                </div>
              </div>
              <div class="favorites-grid" id="favorites-grid">
                <p class="placeholder-text">还没有收藏内容</p>
              </div>
            </div>
          </div>
        </section>

        <section id="view-notebook" class="view">
          <div class="notebook-container">
            <!-- Header with navigation -->
            <div class="notebook-nav">
              <button class="nav-icon-btn" data-view="home" type="button">
                <img src="public/home.png" alt="主页" class="nav-icon" />
                <span class="nav-label">主页</span>
              </button>
              <button class="nav-icon-btn" data-view="profile" type="button">
                <img src="public/user.png" alt="个人中心" class="nav-icon" />
              </button>
            </div>

            <!-- 3-column layout -->
            <div class="notebook-grid">
              <!-- Left column: Blog -->
              <div class="notebook-left">
                <h3 class="section-subtitle">博客</h3>
                <div class="blog-image-container">
                  <img src="public/ielts.png" alt="博客图" class="blog-image" id="blog-image" />
                  <div class="audio-controls-overlay">
                    <button class="control-btn" id="prev-btn" type="button">
                      <img src="public/back.png" alt="后退" class="control-icon" />
                    </button>
                    <button class="control-btn" id="play-pause-btn" type="button">
                      <img src="public/play.png" alt="播放" class="control-icon" id="play-pause-icon" />
                    </button>
                    <button class="control-btn" id="next-btn" type="button">
                      <img src="public/forward.png" alt="前进" class="control-icon" />
                    </button>
                  </div>
                </div>
                <div class="blog-text" id="blog-text">
                  点击播放按钮开始收听博客内容...
                </div>
                <audio id="audio-element" style="display: none;">
                  <source src="" type="audio/mpeg">
                </audio>
              </div>

              <!-- Middle column: Practice Area -->
              <div class="notebook-middle">
                <h3 class="section-subtitle">练习区域</h3>
                <div class="practice-tabs">
                  <button class="tab-btn active" data-tab="flashcard">单词闪卡</button>
                  <button class="tab-btn" data-tab="mindmap">思维导图</button>
                  <button class="tab-btn" data-tab="monopoly">大富翁</button>
                  <button class="tab-btn" data-tab="bingo">Bingo</button>
                </div>

                <!-- Flashcard Tab -->
                <div class="tab-content active" id="tab-flashcard">
                  <div class="tool-header">
                    <img src="public/flashcard.png" alt="单词闪卡" class="tool-icon" />
                    <span class="tool-title">单词闪卡</span>
                  </div>
                  <div class="tool-actions">
                    <button class="primary-btn" id="generate-flashcard">生成单词闪卡</button>
                    <button class="secondary-btn" id="customize-flashcard">自定义</button>
                  </div>

                  <!-- Customization Panel -->
                  <div class="customize-panel" id="flashcard-customize" style="display: none;">
                    <div class="customize-option">
                      <label>闪卡数量：</label>
                      <div class="option-group">
                        <button class="option-btn" data-count="4">更少</button>
                        <button class="option-btn active" data-count="6">标准</button>
                        <button class="option-btn" data-count="9">更多</button>
                      </div>
                    </div>
                    <div class="customize-option">
                      <label>配图描述：</label>
                      <input type="text" class="style-input" id="illustration-style" placeholder="例如: Zootopia character style" />
                    </div>
                    <button class="primary-btn" id="generate-custom-flashcard">生成</button>
                  </div>

                  <!-- Generated Content Display -->
                  <div class="generated-content" id="flashcard-result" style="display: none;">
                    <div class="loading-spinner" id="flashcard-loading" style="display: none;">
                      <div class="spinner"></div>
                      <p>正在生成闪卡...</p>
                    </div>
                    <div class="result-image" id="flashcard-image-container"></div>
                    <div class="result-actions">
                      <button class="action-btn" id="print-flashcard">打印</button>
                      <button class="action-btn" id="favorite-flashcard">收藏</button>
                    </div>
                  </div>
                </div>

                <!-- Other Tabs (Placeholders) -->
                <div class="tab-content" id="tab-mindmap">
                  <div class="tool-header">
                    <img src="public/mind.png" alt="思维导图" class="tool-icon" />
                    <span class="tool-title">思维导图</span>
                  </div>
                  <p class="placeholder-text">思维导图功能开发中...</p>
                </div>

                <div class="tab-content" id="tab-monopoly">
                  <div class="tool-header">
                    <img src="public/game1.png" alt="大富翁" class="tool-icon" />
                    <span class="tool-title">大富翁</span>
                  </div>
                  <p class="placeholder-text">大富翁功能开发中...</p>
                </div>

                <div class="tab-content" id="tab-bingo">
                  <div class="tool-header">
                    <img src="public/gameicon.png" alt="Bingo" class="tool-icon" />
                    <span class="tool-title">Bingo</span>
                  </div>
                  <p class="placeholder-text">Bingo功能开发中...</p>
                </div>
              </div>

              <!-- Right column: AI Dialogue -->
              <div class="notebook-right">
                <h3 class="section-subtitle">AI对话</h3>
                <div class="ai-chat-area">
                  <div class="chat-messages" id="chat-messages">
                    <div class="chat-message ai-message">
                      你好！我是你的AI助手，有什么可以帮助你的吗？
                    </div>
                  </div>
                  <div class="chat-input-container">
                    <input type="text" class="chat-input" id="chat-input" placeholder="输入消息..." />
                    <button class="chat-send-btn" id="chat-send" type="button">
                      发送
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script src="gemini-api.js"></script>
    <script src="app.js"></script>
  </body>
</html>
